<style>
* {
    box-sizing: border-box;
    width: 100%;
}

input[type=text], select, textarea {
    width: 80%;
    padding: 6px;
    border: 1px solid #ccc;
    resize: vertical;
    font-size:11px;
    font-family: Open Sans;
}

label {
    padding: 12px 12px 12px 0;
    display: inline-block;
    margin-right: 100px;
    font-size:11px;
    font-family: Open Sans;
    color:black;
}


.container {
    border-radius: 5px;
    background-color: #f2f2f2;
}

.col-25 {
    float: left;
    width: 40%;
    margin-top: -1px;
    text-align: left;
    padding-left: 20px;
}

.col-75 {
    float: left;
    width: 60%;
    margin-top: 6px;
    padding-left: 0px;
}

/* Clear floats after the columns */
.row:after {
    content: "";
    display: table;
    clear: both;
}


/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {
    .col-25, .col-75, input[type=submit] {
        width: 100%;
        margin-top: 0;
}
}
.k-window-titlebar {
  border-color: rgb(7, 73, 130);
}


</style>

<kendo-dialog *ngIf="active" (close)="closeForm()">
<kendo-dialog-titlebar style="background-color : white;border-radius: 30px 30px 0 0"> 
  <span *ngIf="(isNew=='add')"><b style="color : black;font-size: 14px;font-family: Open Sans;">Create New Business Rule</b></span>
  <span *ngIf="(isNew=='edit')"><b style="color : black;font-size: 14px;font-family: Open Sans;">Edit Business Rule</b></span>
  <span *ngIf="(isNew=='import')"><b style="color : black;font-size: 14px;font-family: Open Sans;">Import Business Rules</b></span>
  <span *ngIf="(isNew=='delete')"><b style="color : black;font-size: 14px;font-family: Open Sans;">Confirm Delete</b></span>
</kendo-dialog-titlebar> 
 

  <form novalidate [formGroup]="editBusinessForm" *ngIf="(isNew=='add' || isNew=='edit')">
    <div class="container" style="background-color: white" >
   <!-- <div class="row">
      <div class="col-25">
        <label for="study" style="font-size:14px;font-family: serif;font-weight:bold;color:black">Study:</label>
      </div>
      <div class="col-75">
	      <input type="text"  formControlName="study" />&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="domain" style="font-size:14px;font-family: serif;font-weight:bold;color:black">Domain:</label>
      </div>
      <div class="col-75">
        <input type="text"  formControlName="domain" />&nbsp;&nbsp;     
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="subDomain" style="font-size:14px;font-family: serif;font-weight:bold;color:black">Sub Domain:</label>
      </div>
      <div class="col-75">
         <input type="text" formControlName="subDomain" />&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="targetFile" style="font-size:14px;font-family: serif;font-weight:bold;color:black">Target File:</label>
      </div>
      <div class="col-75">
        <input type="text" placeholder="Select Target File" formControlName="targetFile" />&nbsp;&nbsp;
      </div> 
    </div>-->
    <div class="row">
        <div>
            <kendo-popup [offset]="offset" *ngIf="opened" >
            <div *ngIf="opened" style="color : #f31700;font-size:12px;font-family: Open Sans;"><b> {{errorMsg}} </b></div>
          </kendo-popup>
          </div>
      <div class="col-25">
        <label for="targetField">SDTM Variable:</label>
      </div>
      <div class="col-75">
        <!--<input type="text" placeholder="Select Variable Name" formControlName="targetField"/>&nbsp;&nbsp;-->
        <select placeholder="Select Variable Name" formControlName="targetField">
          <option  [ngValue]="null" disabled selected style="display: none;">Select Variable Name</option>
          <option *ngFor="let variable of sdtmVariables" value="{{variable}}">{{variable}}</option>
        </select>&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="sourceFile">Source File:</label>
      </div>
      <div class="col-75">
        <!--<input type="text" placeholder="Select Source File" formControlName="sourceFile"/>&nbsp;-->
        <select placeholder="Select Source File" formControlName="sourceFile" (change)="onSelect($event.target.value)">
          <option  value="null" disabled selected style="display: none;">Select Source Name</option>
          <option *ngFor="let table of lookupTables" value="{{table}}">{{table}}</option>
        </select>&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="sourceField">Source Variable:</label>
      </div>
      <div class="col-75">
       <!-- <input type="text" placeholder="Select Source Variable" formControlName="sourceField" />&nbsp;&nbsp;-->
       <select placeholder="Select Source Variable" formControlName="sourceField">
        <option  value="null" disabled selected style="display: none;">Select Variable Name</option>
        <option *ngFor="let variable of lookupVariables" value="{{variable}}">{{variable}}</option>
      </select>&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25" >
        <label for="joinLogic">Join Logic:</label>
      </div>
      <div class="col-75">
        <input type="text" placeholder="Enter Logic Statement" formControlName="joinLogic" />&nbsp;&nbsp;
      </div>
    </div>        
    <div class="row">
      <div class="col-25">
        <label for="transformation_type">Transformation Type:</label>
      </div>
      <div class="col-75">
        <select placeholder="Select Transformation" formControlName="transformation_type" (change)="changePlaceholderAndValue($event.target.value)">
          <option  [ngValue]="null" disabled selected style="display: none;">Select Type</option>
          <option *ngFor="let type of transTypes" value="{{type.transType}}">{{type.transType}}</option>
        </select>&nbsp;&nbsp;
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="transformation_logic">Transformation Logic:</label>
      </div> 
      <div class="col-75">
        <input type="text" placeholder="{{transPlaceHolder}}" formControlName="transformation_logic" />&nbsp;&nbsp;
      </div>
    </div>
</div>
</form>
<form name="form"  [formGroup]="editBusinessForm" novalidate  *ngIf="(isNew=='import')">
<div class="container" style="background-color: white;">
    <div class="row">
        <div class="col-25">
          <label style="padding-bottom: 0px;" for="I want to create a new set of rules for">I want to create a new set of rules for:</label>
        </div>
        <div class="col-75">
          <select placeholder="Select study" formControlName="study">
            <option  [ngValue]="null" disabled selected style="display: none;">Study Title</option>
            <option *ngFor="let title of studyTitles" value="{{title}}">{{title}}</option>
          </select>&nbsp;
        </div>
      </div>
      <div class="row">
          <div class="col-25">
            <label style="padding-bottom: 0px;" for="Using this library/study as a template">Using this library/study as a template:</label>
          </div>
          <div class="col-75">
            <select placeholder="Select study" formControlName="matrixStudy" (change)="filterDomains($event.target.value);">
              <option  [ngValue]="null" disabled selected style="display: none;">Study Title</option>
              <option *ngFor="let matrixStudy of matrixStudyTitles" value="{{matrixStudy}}">{{matrixStudy}}</option>
            </select>&nbsp;
          </div>
        </div>
        <div class="row">
            <div class="col-25">
              <label for="For this domain">For these domains: </label>
            </div>
            <div class="col-75">
              <!--<select placeholder="Select study" formControlName="domain">
                <option  [ngValue]="null" disabled selected style="display: none;">Domain</option>
                <option *ngFor="let domain of studyDomains" value="{{domain}}">{{domain}}</option>
              </select>-->
              <kendo-multiselect style="width: 80%;height: 30px;font-size:11px;font-family: Open Sans;border-color: #ccc"
                [data]="studyDomains"
                formControlName="importDomain"
                [autoClose]="true"
                placeholder="Domain"
                [textField]="'domainLabel'"
                [valueField]="'domain'">
              <ng-template kendoMultiSelectSummaryTag let-dataItem>
                <label>{{ dataItem }}</label>
              </ng-template>
              </kendo-multiselect>
              &nbsp;
            </div>
          </div>
  
</div>
</form>
  <form novalidate [formGroup]="editBusinessForm" *ngIf="(isNew=='delete')"> 
    Are you sure you want to delete this business rule?
  </form>
  <button kendoButton (click)="onCancel($event)" style="color : white;background-color : rgb(7, 73, 130);border-color: white;font-family: Open Sans Regular;font-size: 12px;width: 70px;border-radius: 6px;margin-top: 10px;">Cancel</button>&nbsp;&nbsp;
  <button *ngIf="(isNew=='add' || isNew=='edit')" kendoButton [disabled]="!editBusinessForm.valid" (click)="onSave($event,isNew)" style="color : white;background-color :  rgb(7, 73, 130);border-color: white;font-family: Open Sans Regular;font-size: 12px;width: 70px;border-radius: 6px;margin-right: -150px;margin-top: 10px;">Submit</button>
  <button *ngIf="(isNew=='import')" kendoButton [disabled]="!editBusinessForm.valid" (click)="fetchTemplate()" style="color : white;background-color :  rgb(7, 73, 130);border-color: white;font-family: Open Sans Regular;font-size: 12px;width: 70px;border-radius: 6px;margin-right: -180px; margin-top: 10px;">Submit</button>
  <button *ngIf="(isNew=='delete')" kendoButton  (click)="onDelete($event)" style="color : white;background-color :  rgb(7, 73, 130);border-color: white;font-family: Open Sans Regular;font-size: 12px;width: 70px;border-radius: 6px;margin-right: -180px; margin-top: 10px;">Ok</button>
  </kendo-dialog>
